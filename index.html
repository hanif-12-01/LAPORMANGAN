<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Lapor Mangan! - Purwokerto</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header>
    <div class="header-content">
      <h1>Lapor Mangan! - Purwokerto</h1>
    </div>
    
    <div class="weather-info" id="weatherInfo" onclick="toggleWeatherDetails()">
      <i class="fas fa-cloud-sun weather-icon" id="weatherIcon"></i>
      <span class="weather-temp" id="weatherTemp">--¬∞C</span>
    </div>
    
    <div class="weather-details" id="weatherDetails">
      <div class="weather-details-header">
        <h3>Cuaca Purwokerto</h3>
        <small id="weatherDate">Hari ini</small>
      </div>
      <div class="weather-details-main">
        <i class="fas fa-cloud-sun weather-details-icon" id="weatherDetailsIcon"></i>
        <div>
          <div class="weather-details-temp" id="weatherDetailsTemp">--¬∞C</div>
          <div class="weather-details-desc" id="weatherDetailsDesc">--</div>
        </div>
      </div>
      <div class="weather-details-stats">
        <div class="weather-stat">
          <i class="fas fa-temperature-low"></i>
          <span>Min: <span id="weatherMinTemp">--¬∞C</span></span>
        </div>
        <div class="weather-stat">
          <i class="fas fa-temperature-high"></i>
          <span>Max: <span id="weatherMaxTemp">--¬∞C</span></span>
        </div>
        <div class="weather-stat">
          <i class="fas fa-tint"></i>
          <span>Kelembapan: <span id="weatherHumidity">--%</span></span>
        </div>
        <div class="weather-stat">
          <i class="fas fa-wind"></i>
          <span>Angin: <span id="weatherWind">-- m/s</span></span>
        </div>
      </div>
    </div>
  </header>

  <div id="map"></div>

  <div class="container">
    <div class="filter-bar">
      <input id="search" placeholder="Cari nama kuliner..." />
      <select id="filter">
        <option value="">Semua</option>
        <option value="Soto">Soto</option>
        <option value="Gorengan">Gorengan</option>
        <option value="Jajanan Tradisional">Jajanan Tradisional</option>
        <option value="Camilan Kering">Camilan Kering</option>
        <option value="Kue Tradisional">Kue Tradisional</option>
        <option value="Kuliner Unik">Kuliner Unik</option>
        <option value="Sayuran">Sayuran</option>
        <option value="Dodol">Dodol</option>
        <option value="Kue Kering">Kue Kering</option>
        <option value="Makanan Ringan">Makanan Ringan</option>
        <option value="Camilan">Camilan</option>
        <option value="Camilan Manis">Camilan Manis</option>
        <option value="Minuman">Minuman</option>
      </select>
      <button onclick="showWeatherRec()">Rekomendasi Cuaca</button>
      <button class="add-btn" onclick="openAddForm()">‚ûï Tambah Kuliner</button>
    </div>

    <div id="list"></div>
  </div>

  <!-- Detail Popup -->
  <div class="detail-popup" id="detailPopup">
    <span class="close-btn" onclick="closeDetail()">√ó</span>
    <div id="detailContent"></div>
  </div>

  <!-- Modal Tambah Kuliner -->
  <div id="addKulinerModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeAddForm()">&times;</span>
      <h2>‚ûï Tambah Lokasi Kuliner Baru</h2>
      <form id="addKulinerForm">
        <label>Nama Kuliner*</label>
        <input type="text" id="addNama" required>

        <label>Kategori*</label>
        <select id="addKategori" required>
          <option value="">Pilih Kategori</option>
          <option value="Soto">Soto</option>
          <option value="Gorengan">Gorengan</option>
          <option value="Jajanan Tradisional">Jajanan Tradisional</option>
          <option value="Camilan Kering">Camilan Kering</option>
          <option value="Kue Tradisional">Kue Tradisional</option>
          <option value="Kuliner Unik">Kuliner Unik</option>
          <option value="Sayuran">Sayuran</option>
          <option value="Dodol">Dodol</option>
          <option value="Kue Kering">Kue Kering</option>
          <option value="Makanan Ringan">Makanan Ringan</option>
          <option value="Camilan">Camilan</option>
          <option value="Camilan Manis">Camilan Manis</option>
          <option value="Minuman">Minuman</option>
        </select>

        <label>Alamat*</label>
        <input type="text" id="addAlamat" required>

        <label>Latitude*</label>
        <input type="number" id="addLat" step="any" placeholder="Contoh: -7.4212" required>

        <label>Longitude*</label>
        <input type="number" id="addLng" step="any" placeholder="Contoh: 109.2422" required>

        <label>Jam Operasional</label>
        <input type="text" id="addJam" placeholder="Contoh: 08:00 - 17:00">

        <label>Harga</label>
        <input type="text" id="addHarga" placeholder="Contoh: Rp 5.000 - 10.000">

        <label>Deskripsi</label>
        <textarea id="addDeskripsi" rows="3" placeholder="Deskripsi kuliner..."></textarea>

        <label>Foto URL</label>
        <input type="url" id="addFoto" placeholder="https://contoh.com/foto.jpg" value="https://i.imgur.com/8z3L5kL.jpg">

        <label>Parkir</label>
        <select id="addParkir">
          <option value="Tersedia">Tersedia</option>
          <option value="Tidak Tersedia">Tidak Tersedia</option>
        </select>

        <label>Rute</label>
        <input type="text" id="addRute" placeholder="Contoh: Jl. Sudirman - Alun-Alun">

        <label>Tipe Lokasi</label>
        <select id="addKeliling">
          <option value="false">Toko Tetap</option>
          <option value="true">Pedagang Keliling</option>
        </select>

        <button type="submit">üìç Tambahkan Lokasi</button>
      </form>
    </div>
  </div>

  <!-- LINE-style Chatbot -->
  <div class="chatbot" onclick="toggleChat()">üí¨</div>
  <div class="chat-popup" id="chatPopup">
    <div class="chat-header">
      <span>MakanBot</span>
      <span class="chat-close" onclick="toggleChat()">√ó</span>
    </div>
    <div class="chat-messages" id="chatMessages">
      <div class="message message-bot">
        <span>Halo! Aku MakanBot üçΩÔ∏è Mau cari kuliner apa di Purwokerto hari ini?</span>
        <div class="message-time">Baru saja</div>
      </div>
    </div>
    <div class="chat-input-container">
      <input type="text" class="chat-input" id="chatInput" placeholder="Ketik pesan..." onkeypress="if(event.key=='Enter') sendChat()">
      <button class="chat-send" onclick="sendChat()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M22 2L11 13" stroke="white" stroke-width="2"/>
          <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="white" stroke-width="2"/>
        </svg>
      </button>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="script.js"></script>
</body>
</html>
